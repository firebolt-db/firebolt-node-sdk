{"uid":"53a61d2dc5bfbf96","name":"Correctly handles error in json body","fullName":"new identity integration test Correctly handles error in json body","historyId":"f74395b74dcc1e5efceb83548db84fb5:d41d8cd98f00b204e9800998ecf8427e","time":{"start":1728912257911,"stop":1728912260696,"duration":2785},"status":"failed","statusMessage":"expect(received).rejects.toThrow(expected)\n\nExpected pattern: /Cannot parse string/\nReceived message: \"\nRequest failed\nURL: https://01hzdxdxjqa9n6c07d5j51skep.api.us-east-1.staging.firebolt.io/query?output_format=JSON_Compact&advanced_mode=1&enable_json_error_output_format=true\nReason: Server error\nResponse status: 400·\nResponse: {\n  \\\"errors\\\": [\n    {\n      \\\"description\\\": \\\"Line 1, Column 15: Unable to cast text 'dummy' to integer\\\",\n      \\\"location\\\": {\n        \\\"failing_line\\\": 1,\n        \\\"start_offset\\\": 15\n      }\n    }\n  ],\n  \\\"query\\\": {\n    \\\"query_id\\\": \\\"f24ef77b-c0a1-4c73-ac5a-86f14f57bbd3\\\",\n    \\\"request_id\\\": \\\"8b48fb89-2038-4e6b-a384-bf7c8237fcde\\\"\n  },\n  \\\"statistics\\\": {\n    \\\"elapsed\\\": 0.003460075\n  }\n}\n\"\n\n      143 |           }\n      144 |           const { message = DEFAULT_ERROR, code } = json as ErrorResponse;\n    > 145 |           throw new ApiError({\n          |                 ^\n      146 |             message,\n      147 |             code,\n      148 |             status: response.status,\n\n      at makeRequest (src/http/node.ts:145:17)\n      at ConnectionV2.execute (src/connection/base.ts:193:24)\n      at Object.<anonymous> (test/integration/v2/index.test.ts:124:5)","statusTrace":"Error: expect(received).rejects.toThrow(expected)\n\nExpected pattern: /Cannot parse string/\nReceived message: \"\nRequest failed\nURL: https://01hzdxdxjqa9n6c07d5j51skep.api.us-east-1.staging.firebolt.io/query?output_format=JSON_Compact&advanced_mode=1&enable_json_error_output_format=true\nReason: Server error\nResponse status: 400·\nResponse: {\n  \\\"errors\\\": [\n    {\n      \\\"description\\\": \\\"Line 1, Column 15: Unable to cast text 'dummy' to integer\\\",\n      \\\"location\\\": {\n        \\\"failing_line\\\": 1,\n        \\\"start_offset\\\": 15\n      }\n    }\n  ],\n  \\\"query\\\": {\n    \\\"query_id\\\": \\\"f24ef77b-c0a1-4c73-ac5a-86f14f57bbd3\\\",\n    \\\"request_id\\\": \\\"8b48fb89-2038-4e6b-a384-bf7c8237fcde\\\"\n  },\n  \\\"statistics\\\": {\n    \\\"elapsed\\\": 0.003460075\n  }\n}\n\"\n\n      143 |           }\n      144 |           const { message = DEFAULT_ERROR, code } = json as ErrorResponse;\n    > 145 |           throw new ApiError({\n          |                 ^\n      146 |             message,\n      147 |             code,\n      148 |             status: response.status,\n\n      at makeRequest (src/http/node.ts:145:17)\n      at ConnectionV2.execute (src/connection/base.ts:193:24)\n      at Object.<anonymous> (test/integration/v2/index.test.ts:124:5)\n    at Object.toThrow (/home/runner/work/firebolt-node-sdk/firebolt-node-sdk/node_modules/expect/build/index.js:218:22)\n    at Object.<anonymous> (/home/runner/work/firebolt-node-sdk/firebolt-node-sdk/test/integration/v2/index.test.ts:124:69)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"language","value":"javascript"},{"name":"framework","value":"jest"},{"name":"package","value":"test.integration.v2"},{"name":"thread","value":"1"},{"name":"host","value":"fv-az1296-862"},{"name":"parentSuite","value":"new identity integration test"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"53a61d2dc5bfbf96.json","parameterValues":[]}